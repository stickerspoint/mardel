
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Catálogo</title>
  <link rel="stylesheet" href="estilos.css" />
</head>
<body>
  <header class="header">
    <div class="logo">StickersPoint</div>
    <nav class="nav-links">
      <a href="index.html">Inicio</a>
      <a href="catalogo.html">Productos</a>
      <a href="#">Contacto</a>
    </nav>
    <div class="icons">
      <button class="icon-btn"><i class="fas fa-shopping-cart"></i></button>
    </div>
  </header>

  <main style="padding: 40px 20px;">
    <h1 style="text-align: center; margin-bottom: 40px; color: #f0a41c;">Catálogo de Productos</h1>
    <div id="contenedorCatalogo"></div>
  </main>

  <script>
    async function cargarCatalogo() {
      const res = await fetch("productos.json");
      const productos = await res.json();

      const contenedor = document.getElementById("contenedorCatalogo");
      const categorias = {};

      productos.forEach(p => {
        if (!categorias[p.categoria]) categorias[p.categoria] = [];
        categorias[p.categoria].push(p);
      });

      Object.entries(categorias).forEach(([categoria, items]) => {
        const bloque = document.createElement("section");
        bloque.classList.add("destacados");

        const titulo = document.createElement("h2");
        titulo.textContent = categoria;
        bloque.appendChild(titulo);

        const grid = document.createElement("div");
        grid.classList.add("destacados-grid");

        items.forEach(producto => {
          const div = document.createElement("div");
          div.classList.add("producto");
          if (producto.stock <= 0) div.classList.add("fuera-stock");

          div.innerHTML = `
            ${producto.imagen
              ? `<img src="${producto.imagen}" alt="${producto.nombre}">`
              : `<div class="sin-imagen">Imagen no disponible</div>`}
            <h3>${producto.nombre}</h3>
            <p>$${producto.precio}</p>
            ${producto.stock > 0
              ? '<button class="btn-agregar">Agregar al carrito</button>'
              : ''}
          `;

          if (producto.stock > 0) {
            div.querySelector("button").onclick = () => agregarAlCarrito(producto);
          }

          grid.appendChild(div);
        });

        bloque.appendChild(grid);
        contenedor.appendChild(bloque);
      });
    }

    function agregarAlCarrito(producto) {
      let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
      carrito.push(producto);
      localStorage.setItem("carrito", JSON.stringify(carrito));
    }

    document.addEventListener("DOMContentLoaded", cargarCatalogo);
  </script>
</body>
</html>
